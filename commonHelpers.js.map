{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const BASE_URL = \"https://pixabay.com/api/\";\nconst KEY = \"44014136-e2da13f55dbc3b2e82126e922\";\n\nexport const fetchPhotosByQuery = (searchQuery) => {\n\n\tconst searchParams = new URLSearchParams({\n\t\tkey: KEY,\n\t\tq: searchQuery,\n\t\timage_type: \"photo\",\n\t\torientation: \"horizontal\",\n\t\tsafesearch: true,\n\n\t});\n\n\treturn fetch(`${BASE_URL}?${searchParams}`).then(response => {\n\t\tif (!response.ok) {\n\t\t\tthrow new Error(response.statusText);\n\t\t}\n\t\treturn response.json();\n\t})\n};\n\n\n\n","export const createGalleryItemMarkup = (images) => {\n\t// if (!Array.isArray(images)) {\n\t// \tconsole.error('Expected an array, but received:', images);\n\t// \treturn '';\n\t// }\n\n\treturn images.map(\n\t\t({ largeImageURL, id, webformatURL, tags, likes, views, comments, downloads }) =>\n\t\t\t`<li class=\"box-item\">\n\t\t\t<a class=\"box-link\" href=\"${largeImageURL}\">\n\t\t\t  <img\n\t\t\t\t id=\"${id}\"\n\t\t\t\t class=\"box-image\"\n\t\t\t\t src=\"${webformatURL}\"\n\t\t\t\t alt=\"${tags}\"\n\t\t\t\t width=\"100%\"\n\t\t\t\t height=\"152\"\n\t\t\t  />\n\t\t\t</a>\n\t\t\t<div class=\"image-characteristics\">\n\t\t\t  <div class=\"characteristic-item\">\n\t\t\t\t <h3 class=\"image-title\">Likes</h3>\n\t\t\t\t <p class=\"image-data\">${likes}</p>\n\t\t\t  </div>\n\t\t\t  <div class=\"characteristic-item\">\n\t\t\t\t <h3 class=\"image-title\">Views</h3>\n\t\t\t\t <p class=\"image-data\">${views}</p>\n\t\t\t  </div>\n\t\t\t  <div class=\"characteristic-item\">\n\t\t\t\t <h3 class=\"image-title\">Comments</h3>\n\t\t\t\t <p class=\"image-data\">${comments}</p>\n\t\t\t  </div>\n\t\t\t  <div class=\"characteristic-item\">\n\t\t\t\t <h3 class=\"image-title\">Downloads</h3>\n\t\t\t\t <p class=\"image-data\">${downloads}</p>\n\t\t\t  </div>\n\t\t\t</div>\n\t\t </li>`\n\t)\n\t\t.join('');\n};\n\n// console.log(createGalleryItemMarkup(fetchPhotosByQuery()));","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { fetchPhotosByQuery } from \"./js/pixabay-api.js\";\nimport { createGalleryItemMarkup } from \"./js/render-functions.js\";\n\nconst galleryEl = document.querySelector(\".gallery-box-js\");\nconst searchFormEl = document.querySelector(\".search-form-js\");\nconst loaderEl = document.querySelector(\".loader-js\");\n\nlet lightbox;\nconst initializeOrUpdateLightbox = () => {\n\tif (lightbox) {\n\t\tlightbox.refresh();\n\t} else {\n\t\tlightbox = new SimpleLightbox('.box-link', {\n\t\t\tcaptions: true,\n\t\t\tcaptionsData: 'alt',\n\t\t\tcaptionDelay: 250,\n\t\t});\n\t}\n};\n\nfunction onSearchFormSubmit(event) {\n\tevent.preventDefault();\n\tconst searchQuery = event.target.elements.search.value.trim();\n\n\tif (searchQuery === '') {\n\t\tgalleryEl.innerHTML = '';\n\t\tevent.target.reset();\n\t\tiziToast.show({\n\t\t\tmessage: 'Input field can not be empty',\n\t\t\tposition: 'topRight',\n\t\t\ttimeout: 2000,\n\t\t\tcolor: 'red',\n\t\t});\n\n\t\treturn;\n\t}\n\tgalleryEl.innerHTML = '';\n\tloaderEl.classList.remove(\"is-hidden\");\n\n\tfetchPhotosByQuery(searchQuery)\n\t\t.then(imagesData => {\n\t\t\tif (imagesData.total === 0) {\n\t\t\t\tiziToast.show({\n\t\t\t\t\tmessage: 'Sorry, there are no images for this query',\n\t\t\t\t\tposition: 'topRight',\n\t\t\t\t\ttimeout: 2000,\n\t\t\t\t\tcolor: 'red',\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn imagesData;\n\t\t})\n\t\t.then((imageData) => {\n\t\t\tconst markup = createGalleryItemMarkup(imageData.hits.slice(0, 9));\n\t\t\tgalleryEl.insertAdjacentHTML(\"afterbegin\", markup);\n\t\t\tinitializeOrUpdateLightbox();\n\n\t\t})\n\n\t\t.catch(error => console.log(error))\n\t\t.finally(() => {\n\t\t\tevent.target.reset();\n\t\t\tloaderEl.classList.add(\"is-hidden\");\n\t\t});\n}\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n\n\n\n\n\n"],"names":["BASE_URL","KEY","fetchPhotosByQuery","searchQuery","searchParams","response","createGalleryItemMarkup","images","largeImageURL","id","webformatURL","tags","likes","views","comments","downloads","galleryEl","searchFormEl","loaderEl","lightbox","initializeOrUpdateLightbox","SimpleLightbox","onSearchFormSubmit","event","iziToast","imagesData","imageData","markup","error"],"mappings":"6vBAAA,MAAMA,EAAW,2BACXC,EAAM,qCAECC,EAAsBC,GAAgB,CAElD,MAAMC,EAAe,IAAI,gBAAgB,CACxC,IAAKH,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAEd,CAAE,EAED,OAAO,MAAM,GAAGH,CAAQ,IAAII,CAAY,EAAE,EAAE,KAAKC,GAAY,CAC5D,GAAI,CAACA,EAAS,GACb,MAAM,IAAI,MAAMA,EAAS,UAAU,EAEpC,OAAOA,EAAS,MAClB,CAAE,CACF,ECpBaC,EAA2BC,GAMhCA,EAAO,IACb,CAAC,CAAE,cAAAC,EAAe,GAAAC,EAAI,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAC5E;AAAA,+BAC4BP,CAAa;AAAA;AAAA,WAEjCC,CAAE;AAAA;AAAA,YAEDC,CAAY;AAAA,YACZC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAQaC,CAAK;AAAA;AAAA;AAAA;AAAA,6BAILC,CAAK;AAAA;AAAA;AAAA;AAAA,6BAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,6BAIRC,CAAS;AAAA;AAAA;AAAA,SAIpC,EACC,KAAK,EAAE,EChCJC,EAAY,SAAS,cAAc,iBAAiB,EACpDC,EAAe,SAAS,cAAc,iBAAiB,EACvDC,EAAW,SAAS,cAAc,YAAY,EAEpD,IAAIC,EACJ,MAAMC,EAA6B,IAAM,CACpCD,EACHA,EAAS,QAAO,EAEhBA,EAAW,IAAIE,EAAe,YAAa,CAC1C,SAAU,GACV,aAAc,MACd,aAAc,GACjB,CAAG,CAEH,EAEA,SAASC,EAAmBC,EAAO,CAClCA,EAAM,eAAc,EACpB,MAAMpB,EAAcoB,EAAM,OAAO,SAAS,OAAO,MAAM,OAEvD,GAAIpB,IAAgB,GAAI,CACvBa,EAAU,UAAY,GACtBO,EAAM,OAAO,QACbC,EAAS,KAAK,CACb,QAAS,+BACT,SAAU,WACV,QAAS,IACT,MAAO,KACV,CAAG,EAED,MACA,CACDR,EAAU,UAAY,GACtBE,EAAS,UAAU,OAAO,WAAW,EAErChB,EAAmBC,CAAW,EAC5B,KAAKsB,IACDA,EAAW,QAAU,GACxBD,EAAS,KAAK,CACb,QAAS,4CACT,SAAU,WACV,QAAS,IACT,MAAO,KACZ,CAAK,EAEKC,EACP,EACA,KAAMC,GAAc,CACpB,MAAMC,EAASrB,EAAwBoB,EAAU,KAAK,MAAM,EAAG,CAAC,CAAC,EACjEV,EAAU,mBAAmB,aAAcW,CAAM,EACjDP,GAEH,CAAG,EAEA,MAAMQ,GAAS,QAAQ,IAAIA,CAAK,CAAC,EACjC,QAAQ,IAAM,CACdL,EAAM,OAAO,QACbL,EAAS,UAAU,IAAI,WAAW,CACrC,CAAG,CACH,CAEAD,EAAa,iBAAiB,SAAUK,CAAkB"}